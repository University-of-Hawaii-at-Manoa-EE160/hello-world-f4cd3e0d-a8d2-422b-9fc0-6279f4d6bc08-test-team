---
layout: default
title: Lecture 23
---

<div class="lecture">
  <ul class="outline">
    <li class="item">
      <h2 class="headline">Interacting With Files</h2>
      <div class="content">
        <div>
          <div class="point">
            <p class="topic">Why is interacting with files important?:</p>
            <ul class="details">
              <li>files allow data to persist after the program has finished executing</li>
              <li>all programs prior to now can only store data for the length of time the program is executing</li>
            </ul>
          </div>
        </div>
        <div>
          <div class="point">
            <p class="topic">How to interact with files?:</p>
            <ul class="details">
              <li>declare a file pointer <code>FILE *file_pointer;</code>
                <ul>
                  <li>read more about <code>FILE</code> here: <a href="http://www.cplusplus.com/reference/cstdio/FILE/">http://www.cplusplus.com/reference/cstdio/FILE/</a></li>
                  <li>review the lecture on pointers: <a href="{{ site.baseurl }}/lectures/pointers_addresses_values/">Pointers Lecture</a></li>
                </ul>
              </li>
              <li>attach a file to the file pointer <code>file_pointer = fopen("test.txt", "r");</code>
                <ul>
                  <li>read more about <code>fopen</code> here: <a href="http://www.cprogramming.com/tutorial/cfileio.html">http://www.cprogramming.com/tutorial/cfileio.html</a></li>
                  <li>understand the different modes to open a file:
                    <ul>
                      <li><code>r</code>: open for reading</li>
                      <li><code>w</code>: open for writing (file need not exist)</li>
                      <li><code>a</code>: open for appending (file need not exist)</li>
                      <li><code>r+</code>: open for reading and writing, start at beginning</li>
                      <li><code>w+</code>: open for reading and writing (overwrite file)</li>
                      <li><code>a+</code>: open for reading and writing (append if file exists)</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>read/write to the file using <code>fscanf</code>/<code>fprintf</code>
                <ul>
                  <li>read more about <code>fscanf</code> here: <a href="http://www.cplusplus.com/reference/cstdio/fscanf/">http://www.cplusplus.com/reference/cstdio/fscanf/</a></li>
                  <li>read more about <code>fprintf</code> here: <a href="http://www.cplusplus.com/reference/cstdio/fprintf/">http://www.cplusplus.com/reference/cstdio/fprintf/</a></li>
                </ul>
              </li>
              <li>close the file and file pointer <code>fclose(file_pointer);</code>
                <ul>
                  <li>read more about <code>fclose</code> here: <a href="http://www.cplusplus.com/reference/cstdio/fclose/">http://www.cplusplus.com/reference/cstdio/fclose/</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </li>  
    <li class="item">
      <h2 class="headline">Open and Close a File</h2>
      <div class="content">
        <div class="point">
          <p class="topic">A simple example of opening and closing a file:</p>
          <div class="details">
            <p>This program opens and closes a file and displays a message if file was successfully or unsuccessfully opened</p>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/open_close_file.c">open_close_file.c</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/open_close_file.c"></script>
          </div>
        </div>
        <div class="point">
          <p class="topic">NULL</p>
          <ul class="details">
            <li><code>NULL</code> is a way to detect if file was opened correctly or not</li>
            <li><code>NULL</code> is just a macro constant for <code>0</code></li>
            <li>you could just compare to <code>0</code>, but <code>NULL</code> is more descriptive</li>
          </ul>
        </div>
        <div class="point">
          <p class="topic">File Location</p>
          <ul class="details">
            <li>the file location parameter in <code>fopen(<strong>"data/test.txt"</strong>, "r");</code> is relative to where the executable is ran from</li>
            <li>the file location is not relative to where the <em class="file well well-small">open_close_file.c</em> file is located</li>
            <li>if <code>pwd</code> returns <pre>code/files</pre> and I run a program that opens <code>fopen(<strong>"data/test.txt"</strong>, "r");</code>, then the program is going to look for <pre>code/files/data/test.txt</pre></li>
          </ul>
        </div>
      </div>      
    </li>
    <li class="item">
      <h2 class="headline">Read From a File</h2>
      <div class="content">
        <div class="point">
          <p class="topic">A simple example of reading a file:</p>
          <div class="details">
            <p>This program reads from a file and displays the file contents to the user:</p>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file.c">read_file.c</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file.c"></script>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt">data/test.txt</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt"></script>
          </div>
        </div>
        <div class="point">
          <p class="topic">Things to note:</p>
          <div class="details">
            <ul>
              <li><code>fscanf</code> behaves very similarly to <code>scanf</code></li>
            </ul>
          </div>
        </div>      
        <div class="point">
          <p class="topic">Another example of reading a file:</p>
          <div class="details">
            <p>This program reads from a file using a <code>while</code> loop and displays the file contents to the user:</p>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file_with_while.c">read_file_with_while.c</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file_with_while.c"></script>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt">data/test.txt</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt"></script>
          </div>
        </div>
        <div class="point">
          <p class="topic">Things to note:</p>
          <div class="details">
            <ul>
              <li><code>EOF</code> means "end of file"</li>
              <li><code>EOF</code> is just a macro constant for <code>-1</code></li>
              <li>you could just compare <code>-1</code>, but <code>EOF</code> is more descriptive</li>
            </ul>
          </div>
        </div>      
      </div>
    </li>
    <li class="item">
      <h2 class="headline">Writing to a File</h2>
      <div class="content">
        <div class="point">
          <p class="topic">A simple example of writing to a file:</p>
          <div class="details">
            <p>This program creates a files and then writes to it:</p>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/write_file.c">write_file.c</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/write_file.c"></script>
          </div>
        </div>      
        <div class="point">
          <p class="topic">Things to note:</p>
          <div class="details">
            <ul>
              <li><code>fprintf</code> behaves very similarly to <code>printf</code></li>
            </ul>
          </div>
        </div>      
      </div>
    </li>
    <li class="item">
      <h2 class="headline">Write a Program to Copy One File's Content to Another File</h2>
    </li>
    <li class="item">
      <h2 class="headline">Assignment</h2>
      <div class="content">
        <ul>Homework Problem 23.1, at the end of this assignment you should upload to your Laulima dropbox:
          <li>a file named <em class="file well well-small">UHusername_23_1.c</em></li>
          <li>a file named <em class="file well well-small">UHusername_23_1_input.txt</em></li>
          <li>
            <ul>example:
              <li><em class="file well well-small">zhaol_23_1.c</em></li>
              <li><em class="file well well-small">zhaol_23_1_input.txt</em></li>
            </ul>
          </li>
        </ul>
        <p>Write a program that parses a text file (UHusername_23_1_input.txt) that contains the following text:</p>
<pre>when i was young me and my mama had beef
seventeen years old kicked out on the streets
though back at the time, i never thought i'd see her face
ain't a woman alive that could take my mama's place
suspended from school; and scared to go home, i was a fool
with the big boys, breakin all the rules
i shed tears with my baby sister
over the years we was poorer than the other little kids
and even though we had different daddy's, the same drama
when things went wrong we'd blame mama
i reminice on the stress I caused, it was hell
huggin on my mama from a jail cell
and who'd think in elementary?
heeey! I see the penitentiary, one day
and runnin from the police, that's right
mama catch me, put a whoopin to my backside
and even as a crack fiend, mama
you always was a black queen, mama
i finally understand
for a woman it ain't easy tryin to raise a man
you always was committed
a poor single mother on welfare, tell me how ya did it
there's no way I can pay you back
but the plan is to show you that i understand
you are appreciated

lady... 
don't cha know we love ya? sweet lady
dear mama
place no one above ya, sweet lady
you are appreciated
don't cha know we love ya?

now ain't nobody tell us it was fair
no love from my daddy cause the coward wasn't there
he passed away and i didn't cry, cause my anger
wouldn't let me feel for a stranger
they say i'm wrong and i'm heartless, but all along
i was lookin for a father he was gone
i hung around with the thugs, and even though they sold drugs
they showed a young brother love
i moved out and started really hangin
i needed money of my own so i started slangin
i ain't guilty cause, even though i sell rocks
it feels good puttin money in your mailbox
i love payin rent when the rent's due
i hope ya got the diamond necklace that i sent to you
cause when I was low you was there for me
and never left me alone because you cared for me
and i could see you comin home after work late
you're in the kitchen tryin to fix us a hot plate
ya just workin with the scraps you was given
and mama made miracles every thanksgivin
but now the road got rough, you're alone
you're tryin to raise two bad kids on your own
and there's no way i can pay you back
but my plan is to show you that i understand
you are appreciated

pour out some liquor and i reminsce, cause through the drama
i can always depend on my mama
and when it seems that i'm hopeless
you say the words that can get me back in focus
when i was sick as a little kid
to keep me happy there's no limit to the things you did
and all my childhood memories
are full of all the sweet things you did for me
and even though i act craaazy
i gotta thank the Lord that you made me
there are no words that can express how i feel
you never kept a secret, always stayed real
and i appreciate, how you raised me
and all the extra love that you gave me
i wish i could take the pain away
if you can make it through the night there's a brighter day
everything will be alright if ya hold on
it's a struggle everyday, gotta roll on
and there's no way i can pay you back
but my plan is to show you that i understand
you are appreciated</pre>
        <p>The program displays the number of times "mama" shows up in the text file</p>
        <ul>The program can assume:
          <li>all the text is lowercase</li>
          <li>there are no words that contain the sequence of characters m,a,m,a, such as mamaliga</li>
        </ul>
        <ul>For this assignment, you can use:
          <li>any function listed at <a href="http://www.mrx.net/c/readfunctions.html">http://www.mrx.net/c/readfunctions.html</a></li>
          <li>any function listed at <a href="http://en.wikipedia.org/wiki/C_string_handling#Functions">http://en.wikipedia.org/wiki/C_string_handling#Functions</a></li>
        </ul>
        <ul>Here are some things that might help:
          <li><a href="http://stackoverflow.com/questions/3825668/c-c-checking-for-null-pointer">http://stackoverflow.com/questions/3825668/c-c-checking-for-null-pointer</a></li>
          <li>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/reverse_truncate.c">reverse_truncate.c</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/reverse_truncate.c"></script>
          </li>
        </ul>
      </div>
    </li>
  </ul>
</div>