---
layout: default
title: Lecture 23
---

<div class="lecture">
  <ul class="outline">
    <li class="item">
      <h2 class="headline">Interacting With Files</h2>
      <div class="content">
        <div>
          <div class="point">
            <p class="topic">Why is interacting with files important?:</p>
            <ul class="details">
              <li>files allow data to persist after the program has finished executing</li>
              <li>all programs prior to now can only store data for the length of time the program is executing</li>
            </ul>
          </div>
        </div>
        <div>
          <div class="point">
            <p class="topic">How to interact with files?:</p>
            <ul class="details">
              <li>declare a file pointer <code>FILE *file_pointer;</code>
                <ul>
                  <li>read more about <code>FILE</code> here: <a href="http://www.cplusplus.com/reference/cstdio/FILE/">http://www.cplusplus.com/reference/cstdio/FILE/</a></li>
                  <li>review the lecture on pointers: <a href="{{ site.baseurl }}/lectures/pointers_addresses_values/">Pointers Lecture</a></li>
                </ul>
              </li>
              <li>attach a file to the file pointer <code>file_pointer = fopen("test.txt", "r");</code>
                <ul>
                  <li>read more about <code>fopen</code> here: <a href="http://www.cprogramming.com/tutorial/cfileio.html">http://www.cprogramming.com/tutorial/cfileio.html</a></li>
                  <li>understand the different modes to open a file:
                    <ul>
                      <li><code>r</code>: open for reading</li>
                      <li><code>w</code>: open for writing (file need not exist)</li>
                      <li><code>a</code>: open for appending (file need not exist)</li>
                      <li><code>r+</code>: open for reading and writing, start at beginning</li>
                      <li><code>w+</code>: open for reading and writing (overwrite file)</li>
                      <li><code>a+</code>: open for reading and writing (append if file exists)</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li>read/write to the file using <code>fscanf</code>/<code>fprintf</code>
                <ul>
                  <li>read more about <code>fscanf</code> here: <a href="http://www.cplusplus.com/reference/cstdio/fscanf/">http://www.cplusplus.com/reference/cstdio/fscanf/</a></li>
                  <li>read more about <code>fprintf</code> here: <a href="http://www.cplusplus.com/reference/cstdio/fprintf/">http://www.cplusplus.com/reference/cstdio/fprintf/</a></li>
                </ul>
              </li>
              <li>close the file and file pointer <code>fclose(file_pointer);</code>
                <ul>
                  <li>read more about <code>fclose</code> here: <a href="http://www.cplusplus.com/reference/cstdio/fclose/">http://www.cplusplus.com/reference/cstdio/fclose/</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </li>  
    <li class="item">
      <h2 class="headline">Open and Close a File</h2>
      <div class="content">
        <div class="point">
          <p class="topic">A simple example of opening and closing a file:</p>
          <div class="details">
            <p>This program opens and closes a file and displays a message if file was successfully or unsuccessfully opened</p>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/open_close_file.c">open_close_file.c</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/open_close_file.c"></script>
          </div>
        </div>
        <div class="point">
          <p class="topic">NULL</p>
          <ul class="details">
            <li><code>NULL</code> is a way to detect if file was opened correctly or not</li>
            <li><code>NULL</code> is just a macro constant for <code>0</code></li>
            <li>you could just compare to <code>0</code>, but <code>NULL</code> is more descriptive</li>
          </ul>
        </div>
        <div class="point">
          <p class="topic">File Location</p>
          <ul class="details">
            <li>the file location parameter in <code>fopen(<strong>"data/test.txt"</strong>, "r");</code> is relative to where the executable is ran from</li>
            <li>the file location is not relative to where the <em class="file well well-small">open_close_file.c</em> file is located</li>
            <li>if <code>pwd</code> returns <pre>code/files</pre> and I run a program that opens <code>fopen(<strong>"data/test.txt"</strong>, "r");</code>, then the program is going to look for <pre>code/files/data/test.txt</pre></li>
          </ul>
        </div>
      </div>      
    </li>
    <li class="item">
      <h2 class="headline">Read From a File</h2>
      <div class="content">
        <div class="point">
          <p class="topic">A simple example of reading a file:</p>
          <div class="details">
            <p>This program reads from a file and displays the file contents to the user:</p>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file.c">read_file.c</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file.c"></script>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt">data/test.txt</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt"></script>
          </div>
        </div>
        <div class="point">
          <p class="topic">Things to note:</p>
          <div class="details">
            <ul>
              <li><code>fscanf</code> behaves very similarly to <code>scanf</code></li>
            </ul>
          </div>
        </div>      
        <div class="point">
          <p class="topic">Another example of reading a file:</p>
          <div class="details">
            <p>This program reads from a file using a <code>while</code> loop and displays the file contents to the user:</p>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file_with_while.c">read_file_with_while.c</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/read_file_with_while.c"></script>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt">data/test.txt</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/data/test.txt"></script>
          </div>
        </div>
        <div class="point">
          <p class="topic">Things to note:</p>
          <div class="details">
            <ul>
              <li><code>EOF</code> means "end of file"</li>
              <li><code>EOF</code> is just a macro constant for <code>-1</code></li>
              <li>you could just compare <code>-1</code>, but <code>EOF</code> is more descriptive</li>
            </ul>
          </div>
        </div>      
      </div>
    </li>
    <li class="item">
      <h2 class="headline">Writing to a File</h2>
      <div class="content">
        <div class="point">
          <p class="topic">A simple example of writing to a file:</p>
          <div class="details">
            <p>This program creates a files and then writes to it:</p>
            <p><em class="file well well-small"><a href="http://github.com/zhaol/ee160/blob/gh-pages/code/files/write_file.c">write_file.c</a></em>:</p>
            <script src="http://gist-it.appspot.com/https://github.com/zhaol/ee160/blob/gh-pages/code/files/write_file.c"></script>
          </div>
        </div>      
        <div class="point">
          <p class="topic">Things to note:</p>
          <div class="details">
            <ul>
              <li><code>fprintf</code> behaves very similarly to <code>printf</code></li>
            </ul>
          </div>
        </div>      
      </div>
    </li>
    <li class="item">
      <h2 class="headline">Assignment</h2>
      <div class="content">
        <!-- #### TODO: copy content from one file to another -->
      </div>
    </li>
  </ul>
</div>